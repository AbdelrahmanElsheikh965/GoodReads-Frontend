<table id="customers">
    <tr *ngFor="let userbook of userBooks; let $index=index">
        <td>{{userbook.bookName}}</td>
        <td>{{userbook.bookId}}</td>
        <td>
            <span *ngFor="let star of [1, 2, 3, 4, 5]">
                <i class="fa" [class.fa-star]="star <= userbook.rate" [class.fa-star-o]="star > userbook.rate" [style.color]="star <= userbook.rate ? '#3b5d50' : 'gray'"></i>
            </span>
        </td>
        <td>
            {{userbook.shelve}}
            <button *ngIf="!userbook.showForm" (click)="toggleUpdateForm($index)">Update Shelve</button>
            <form *ngIf="userbook.showForm" [formGroup]="updateShelveForm" (ngSubmit)="handleShelveSubmit(userbook.bookId)">
                <input [value]="userId" type="hidden" formControlName="_id" />
                <select formControlName="shelve">
                    <option value="" disabled selected hidden>Choose the shelve</option>
                    <option value="read">Read</option>
                    <option value="reading">Reading</option>
                    <option value="want to read">Want to Read</option>
                </select>
                <button type="submit" style="margin-left: 10px;">Update Shelve</button>
            </form>
        </td>
    </tr>
</table>
